name: Android CI


on:
push:
branches: [ main, master ]
workflow_dispatch:


jobs:
build:
runs-on: ubuntu-latest
steps:
- name: Checkout
uses: actions/checkout@v4


- name: Set up JDK 17
uses: actions/setup-java@v4
with:
distribution: 'temurin'
java-version: '17'


- name: Set up Android SDK
uses: android-actions/setup-android@v3


- name: Install Android build tools & platforms
run: |
sdkmanager --install "platforms;android-34" "build-tools;34.0.0" "platform-tools"


- name: Cache Gradle
uses: actions/cache@v4
with:
path: |
~/.gradle/caches
~/.gradle/wrapper
key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
restore-keys: |
${{ runner.os }}-gradle-


- name: Build Debug APK (no wrapper)
uses: gradle/gradle-build-action@v3
with:
gradle-version: 8.7
arguments: assembleDebug


- name: Upload APK